<div class="sticky bottom-0" x-data="{show: false}" 
     x-init="$watch('$store.instance.selected', r => (show = r !== ''))" 
     x-show="show">
    <div class="flex items-center justify-between bg-white border-t border-gray-200 px-4 sm:px-6 md:px-5 h-16">
        <!-- Plus button -->
        <button class="shrink-0 text-gray-400 hover:text-gray-500 mr-3">
            <span class="sr-only">Add</span>
            <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24">
                <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12C23.98 5.38 18.62.02 12 0zm6 13h-5v5h-2v-5H6v-2h5V6h2v5h5v2z" />
            </svg>
        </button>
        <!-- Message input -->
        <form class="grow flex" x-data="{ message: ''}"
        @submit.prevent="() => {
        $store.instance.sendMessage($store.instance.selected, message);
        message = ''
        }">
            <div class="grow mr-3">
                <label for="message-input" class="sr-only">Type a message</label>
                <input x-model="message" id="message-input" class="form-input w-full bg-gray-100 border-transparent focus:bg-white focus:border-gray-300" type="text" placeholder="Aa" />
            </div>
            <button :disabled="$store.instance.loading" type="submit" class="px-4 bg-indigo-500 hover:bg-indigo-600 text-white whitespace-nowrap rounded-sm">
                <span class="w-6 h-6 ">
                    <svg class="w-6 h-6 rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                </span>
            </button>
        </form>
    </div>
</div>